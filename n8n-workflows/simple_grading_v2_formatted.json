{
  "name": "ê°„ë‹¨í•œ ì±„ì  - í¬ë§·íŒ… ë²„ì „",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "grade-formatted",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-input",
      "name": "í…ìŠ¤íŠ¸ ì…ë ¥",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [240, 300],
      "webhookId": "simple-grade-formatted"
    },
    {
      "parameters": {
        "jsCode": "// ì…ë ¥ëœ í•™ìƒ ë‹µì•ˆ\nconst studentAnswer = $input.item.json.body.answer || $input.item.json.answer || \"ë‹µì•ˆì´ ì…ë ¥ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\";\n\n// ì±„ì  ê¸°ì¤€ (í•˜ë“œì½”ë”©)\nconst gradingPrompt = `\n# í•œêµ­ì–´ ì“°ê¸° ê³¼ì œ ì±„ì \n\n## ê³¼ì œ ì •ë³´\n- ê³¼: ì„œìš¸ëŒ€ í•œêµ­ì–´ í”ŒëŸ¬ìŠ¤ 2A-1ê³¼\n- ê³¼ì œëª…: ì œ ê³ í–¥\n- í•„ìˆ˜ ë¬¸ì¥ ìˆ˜: 6ë¬¸ì¥ ì´ìƒ\n\n## í•™ìƒ ë‹µì•ˆ\n${studentAnswer}\n\n---\n\n## ì±„ì  ê¸°ì¤€ (ì´ 100ì )\n\n### 1. ê³¼ì œ ìˆ˜í–‰ë„ (25ì )\në‹¤ìŒ 4ê°€ì§€ í•„ìˆ˜ ìš”ì†Œê°€ ëª¨ë‘ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸:\n- **ì´ë¦„ ì†Œê°œ** (5ì ): '-ë¼ê³  í•˜ë‹¤' ë˜ëŠ” '-ì´ì—ìš”/ì˜ˆìš”' ì‚¬ìš©\n- **ê³ í–¥ ìœ„ì¹˜** (5ì ): 'ê³ í–¥', 'ìˆìŠµë‹ˆë‹¤' ë“±ìœ¼ë¡œ ìœ„ì¹˜ ì„¤ëª…\n- **ê³ í–¥ íŠ¹ì§•** (10ì ): ê³ í–¥ì— ëŒ€í•œ ì„¤ëª… (í¬ê¸°, ë¶„ìœ„ê¸°, íŠ¹ì§• ë“±)\n- **ì†Œê°œí•˜ê³  ì‹¶ì€ ë‚´ìš©** (5ì ): ìœ ëª…í•œ ê²ƒ, ì¢‹ì•„í•˜ëŠ” ì  ë“±\n\n### 2. í•µì‹¬ ë¬¸ë²• ì‚¬ìš© (30ì )\në‹¤ìŒ 4ê°€ì§€ ë¬¸ë²•ì´ **ì •í™•í•˜ê²Œ** ì‚¬ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸:\n\n1. **-ëŠ”ë°/-ì€ë°** (7.5ì )\n   - ìš©ë„: ë°°ê²½ ì„¤ëª…, ëŒ€ì¡°\n   - ì˜ˆì‹œ: \"í•˜ë…¸ì´ì¸ë° ë² íŠ¸ë‚¨ì˜ ë¶ìª½ì— ìˆìŠµë‹ˆë‹¤\"\n   - ì±„ì : í˜•íƒœ ì •í™• + ì˜ë¯¸ ì ì ˆ â†’ ë§Œì  / í˜•íƒœë§Œ ë§ìŒ â†’ 50% / ë¯¸ì‚¬ìš© â†’ 0ì \n\n2. **-ì§€ë§Œ** (7.5ì )\n   - ìš©ë„: ë°˜ëŒ€ ìƒí™© í‘œí˜„\n   - ì˜ˆì‹œ: \"í¬ì§€ ì•Šì§€ë§Œ ì‚¬ëŒë“¤ì´ ë§ìŠµë‹ˆë‹¤\"\n   - ì±„ì : í˜•íƒœ ì •í™• + ì˜ë¯¸ ì ì ˆ â†’ ë§Œì  / í˜•íƒœë§Œ ë§ìŒ â†’ 50% / ë¯¸ì‚¬ìš© â†’ 0ì \n\n3. **-(ìœ¼)ë ¤ê³ ** (7.5ì )\n   - ìš©ë„: ì˜ë„ í‘œí˜„\n   - ì˜ˆì‹œ: \"ì†Œê°œí•˜ë ¤ê³  ì´ ê¸€ì„ ì”ë‹ˆë‹¤\"\n   - ì±„ì : í˜•íƒœ ì •í™• + ì˜ë¯¸ ì ì ˆ â†’ ë§Œì  / í˜•íƒœë§Œ ë§ìŒ â†’ 50% / ë¯¸ì‚¬ìš© â†’ 0ì \n\n4. **-ë¼ê³  í•˜ë‹¤** (7.5ì )\n   - ìš©ë„: ì´ë¦„ ì†Œê°œ, ì¸ìš©\n   - ì˜ˆì‹œ: \"ë‹¤ë‹ˆì—˜ì´ë¼ê³  í•©ë‹ˆë‹¤\"\n   - ì±„ì : í˜•íƒœ ì •í™• + ì˜ë¯¸ ì ì ˆ â†’ ë§Œì  / í˜•íƒœë§Œ ë§ìŒ â†’ 50% / ë¯¸ì‚¬ìš© â†’ 0ì \n\n### 3. ë‚´ìš© ì ì ˆì„± (15ì )\n- ì˜ë¯¸ê°€ ì´í•´ ê°€ëŠ¥í•œê°€? (5ì )\n- ë‚´ìš©ì— ë¶ˆí•„ìš”í•œ ë°˜ë³µì´ ì—†ëŠ”ê°€? (5ì )\n- ì£¼ì œì—ì„œ ë²—ì–´ë‚˜ì§€ ì•Šì•˜ëŠ”ê°€? (5ì )\n\n### 4. ì¡°ì§ë ¥ (10ì )\n- ë¬¸ì¥ ìˆœì„œê°€ ìì—°ìŠ¤ëŸ¬ìš´ê°€? (5ì )\n- ì—°ê²° í‘œí˜„ì´ ì ì ˆí•˜ê²Œ ì‚¬ìš©ë˜ì—ˆëŠ”ê°€? (5ì )\n\n### 5. ì–´íœ˜ ì‚¬ìš© (10ì )\n- 2A ìˆ˜ì¤€ì— ë§ëŠ” ì–´íœ˜ë¥¼ ì‚¬ìš©í–ˆëŠ”ê°€? (5ì )\n- ê°™ì€ ì–´íœ˜ë¥¼ ê³¼ë„í•˜ê²Œ ë°˜ë³µí•˜ì§€ ì•Šì•˜ëŠ”ê°€? (5ì )\n\n### 6. ë¬¸ë²• ì •í™•ì„± (10ì )\n**ì¡°ì‚¬, ì–´ë¯¸ ì˜¤ë¥˜ ê°œìˆ˜ ê¸°ì¤€** (6ë¬¸ì¥ ê¸°ì¤€):\n- 0~1ê°œ ì˜¤ë¥˜: 10ì \n- 2~3ê°œ ì˜¤ë¥˜: 7ì \n- 4~5ê°œ ì˜¤ë¥˜: 4ì \n- 6ê°œ ì´ìƒ ì˜¤ë¥˜: 0ì \n\n---\n\n## ëª¨ë²” ë‹µì•ˆ (ì°¸ê³ ìš©)\nì•ˆë…•í•˜ì„¸ìš”. ì €ëŠ” ë‹¤ë‹ˆì—˜ì´ë¼ê³  í•©ë‹ˆë‹¤. ì œ ê³ í–¥ì€ ë² íŠ¸ë‚¨ í•˜ë…¸ì´ì¸ë° ë² íŠ¸ë‚¨ì˜ ë¶ìª½ì— ìˆìŠµë‹ˆë‹¤. í•˜ë…¸ì´ëŠ” í¬ì§€ ì•Šì§€ë§Œ ì‚¬ëŒë“¤ì´ ë§ê³  í™œê¸°ì°¬ ë„ì‹œì…ë‹ˆë‹¤. ì œê°€ ì†Œê°œí•˜ê³  ì‹¶ì€ ê³³ì€ í˜¸ì•ˆë¼ì—  í˜¸ìˆ˜ì¸ë° ê²½ì¹˜ê°€ ì•„ì£¼ ì¢‹ìŠµë‹ˆë‹¤. ì œ ê³ í–¥ì€ ìŒ€êµ­ìˆ˜ê°€ ìœ ëª…í•˜ì§€ë§Œ ë„ˆë¬´ ë§µì§€ ì•ŠìŠµë‹ˆë‹¤. ì €ëŠ” í•œêµ­ ì¹œêµ¬ë“¤ì—ê²Œ ì œ ê³ í–¥ì„ ì†Œê°œí•˜ë ¤ê³  ì´ ê¸€ì„ ì”ë‹ˆë‹¤.\n\n---\n\n## ì¶œë ¥ í˜•ì‹\n\në°˜ë“œì‹œ ì•„ë˜ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì¶œë ¥í•˜ì„¸ìš”:\n\n{\n  \"scores\": {\n    \"task_completion\": {\n      \"score\": 0,\n      \"max_score\": 25,\n      \"details\": \"ì´ë¦„ ì†Œê°œ: 5/5, ê³ í–¥ ìœ„ì¹˜: 5/5, ê³ í–¥ íŠ¹ì§•: 8/10, ì†Œê°œ ë‚´ìš©: 4/5\"\n    },\n    \"grammar_usage\": {\n      \"score\": 0,\n      \"max_score\": 30,\n      \"details\": \"-ëŠ”ë°/-ì€ë°: 7.5/7.5 (ì‚¬ìš© ì •í™•), -ì§€ë§Œ: 7.5/7.5 (ì‚¬ìš© ì •í™•), -(ìœ¼)ë ¤ê³ : 0/7.5 (ë¯¸ì‚¬ìš©), -ë¼ê³  í•˜ë‹¤: 7.5/7.5 (ì‚¬ìš© ì •í™•)\"\n    },\n    \"content_adequacy\": {\n      \"score\": 0,\n      \"max_score\": 15,\n      \"details\": \"ì˜ë¯¸ ì´í•´ ê°€ëŠ¥: 5/5, ë°˜ë³µ ì—†ìŒ: 4/5, ì£¼ì œ ì¼ê´€ì„±: 5/5\"\n    },\n    \"organization\": {\n      \"score\": 0,\n      \"max_score\": 10,\n      \"details\": \"ë¬¸ì¥ ìˆœì„œ: 5/5, ì—°ê²° í‘œí˜„: 4/5\"\n    },\n    \"vocabulary\": {\n      \"score\": 0,\n      \"max_score\": 10,\n      \"details\": \"ìˆ˜ì¤€ ì ì ˆì„±: 5/5, ë°˜ë³µ íšŒí”¼: 4/5\"\n    },\n    \"grammar_accuracy\": {\n      \"score\": 0,\n      \"max_score\": 10,\n      \"error_count\": 0,\n      \"errors\": [\"ì˜¤ë¥˜ ì˜ˆì‹œ 1\", \"ì˜¤ë¥˜ ì˜ˆì‹œ 2\"]\n    },\n    \"total_score\": 0\n  },\n  \"feedback\": {\n    \"strengths\": [\n      \"ì˜í•œ ì  1\",\n      \"ì˜í•œ ì  2\"\n    ],\n    \"improvements\": [\n      \"ê°œì„ í•  ì  1\",\n      \"ê°œì„ í•  ì  2\"\n    ],\n    \"overall_comment\": \"ì „ì²´ì ì¸ í‰ê°€ë¥¼ 2-3ë¬¸ì¥ìœ¼ë¡œ ì‘ì„±\"\n  }\n}\n`;\n\nreturn [{\n  json: {\n    student_answer: studentAnswer,\n    grading_prompt: gradingPrompt\n  }\n}];"
      },
      "id": "prepare-prompt",
      "name": "í”„ë¡¬í”„íŠ¸ ì¤€ë¹„",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [440, 300]
    },
    {
      "parameters": {
        "resource": "text",
        "operation": "message",
        "model": "gpt-4o",
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "ë‹¹ì‹ ì€ í•œêµ­ì–´ êµìœ¡ ì „ë¬¸ê°€ì´ì ì±„ì  ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì„œìš¸ëŒ€ í•œêµ­ì–´ í”ŒëŸ¬ìŠ¤ 2A êµì¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ì™¸êµ­ì¸ í•™ìŠµìì˜ ì“°ê¸° ë‹µì•ˆì„ ì±„ì í•©ë‹ˆë‹¤. ì£¼ì–´ì§„ ì±„ì  ê¸°ì¤€ì„ ì •í™•íˆ ë”°ë¼ ê³µì •í•˜ê²Œ ì±„ì í•˜ì„¸ìš”."
            },
            {
              "role": "user",
              "content": "={{ $json.grading_prompt }}"
            }
          ]
        },
        "options": {
          "temperature": 0.2,
          "maxTokens": 2000
        },
        "requestOptions": {
          "response_format": "json_object"
        }
      },
      "id": "gpt4-grading",
      "name": "GPT-4 ì±„ì ",
      "type": "n8n-nodes-base.openAi",
      "typeVersion": 1.2,
      "position": [640, 300],
      "credentials": {
        "openAiApi": {
          "id": "openai_credential",
          "name": "OpenAI API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// GPT-4 ì‘ë‹µ íŒŒì‹± ë° í¬ë§·íŒ…\nconst aiResponse = $input.item.json.choices[0].message.content;\nlet gradingResult;\n\ntry {\n  gradingResult = JSON.parse(aiResponse);\n} catch (error) {\n  gradingResult = {\n    error: \"JSON íŒŒì‹± ì‹¤íŒ¨\",\n    raw_response: aiResponse\n  };\n}\n\nconst studentAnswer = $('í”„ë¡¬í”„íŠ¸ ì¤€ë¹„').item.json.student_answer;\n\n// í…ìŠ¤íŠ¸ í¬ë§·íŒ… (ê°€ë…ì„± í–¥ìƒ)\nconst formattedText = `\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“ í•œêµ­ì–´ ì“°ê¸° ìë™ ì±„ì  ê²°ê³¼\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nã€ í•™ìƒ ë‹µì•ˆ ã€‘\n${studentAnswer}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“Š ì±„ì  ê²°ê³¼\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ¯ ì´ì : ${gradingResult.scores?.total_score || 0} / 100ì \n\n[ 1. ê³¼ì œ ìˆ˜í–‰ë„ ]\n   ì ìˆ˜: ${gradingResult.scores?.task_completion?.score || 0} / ${gradingResult.scores?.task_completion?.max_score || 25}ì \n   ${gradingResult.scores?.task_completion?.details || ''}\n\n[ 2. í•µì‹¬ ë¬¸ë²• ì‚¬ìš© ]\n   ì ìˆ˜: ${gradingResult.scores?.grammar_usage?.score || 0} / ${gradingResult.scores?.grammar_usage?.max_score || 30}ì \n   ${gradingResult.scores?.grammar_usage?.details || ''}\n\n[ 3. ë‚´ìš© ì ì ˆì„± ]\n   ì ìˆ˜: ${gradingResult.scores?.content_adequacy?.score || 0} / ${gradingResult.scores?.content_adequacy?.max_score || 15}ì \n   ${gradingResult.scores?.content_adequacy?.details || ''}\n\n[ 4. ì¡°ì§ë ¥ ]\n   ì ìˆ˜: ${gradingResult.scores?.organization?.score || 0} / ${gradingResult.scores?.organization?.max_score || 10}ì \n   ${gradingResult.scores?.organization?.details || ''}\n\n[ 5. ì–´íœ˜ ì‚¬ìš© ]\n   ì ìˆ˜: ${gradingResult.scores?.vocabulary?.score || 0} / ${gradingResult.scores?.vocabulary?.max_score || 10}ì \n   ${gradingResult.scores?.vocabulary?.details || ''}\n\n[ 6. ë¬¸ë²• ì •í™•ì„± ]\n   ì ìˆ˜: ${gradingResult.scores?.grammar_accuracy?.score || 0} / ${gradingResult.scores?.grammar_accuracy?.max_score || 10}ì \n   ì˜¤ë¥˜ ê°œìˆ˜: ${gradingResult.scores?.grammar_accuracy?.error_count || 0}ê°œ\n   ${gradingResult.scores?.grammar_accuracy?.errors?.length > 0 ? '\\n   ì˜¤ë¥˜ ëª©ë¡:\\n   - ' + gradingResult.scores.grammar_accuracy.errors.join('\\n   - ') : ''}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ’¬ í”¼ë“œë°±\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nâœ… ì˜í•œ ì :\n${gradingResult.feedback?.strengths?.map((s, i) => `   ${i + 1}. ${s}`).join('\\n') || '   -'}\n\nğŸ“Œ ê°œì„ í•  ì :\n${gradingResult.feedback?.improvements?.map((s, i) => `   ${i + 1}. ${s}`).join('\\n') || '   -'}\n\nğŸ’­ ì¢…í•© í‰ê°€:\n   ${gradingResult.feedback?.overall_comment || ''}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;\n\nreturn [{\n  json: {\n    formatted_text: formattedText,\n    raw_data: gradingResult,\n    student_answer: studentAnswer\n  }\n}];"
      },
      "id": "parse-result",
      "name": "ê²°ê³¼ í¬ë§·íŒ…",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [840, 300]
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "={{ $json.formatted_text }}"
      },
      "id": "webhook-response",
      "name": "í…ìŠ¤íŠ¸ ê²°ê³¼ ë°˜í™˜",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [1040, 300]
    }
  ],
  "connections": {
    "í…ìŠ¤íŠ¸ ì…ë ¥": {
      "main": [
        [
          {
            "node": "í”„ë¡¬í”„íŠ¸ ì¤€ë¹„",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "í”„ë¡¬í”„íŠ¸ ì¤€ë¹„": {
      "main": [
        [
          {
            "node": "GPT-4 ì±„ì ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GPT-4 ì±„ì ": {
      "main": [
        [
          {
            "node": "ê²°ê³¼ í¬ë§·íŒ…",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ê²°ê³¼ í¬ë§·íŒ…": {
      "main": [
        [
          {
            "node": "í…ìŠ¤íŠ¸ ê²°ê³¼ ë°˜í™˜",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2026-01-30T01:52:00.000Z",
  "versionId": "2"
}